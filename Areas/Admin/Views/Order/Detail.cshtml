@model MyWebApp.Models.Order

@{
    ViewData["Title"] = "Chi tiết đơn hàng";
}

<div class = "card shadow-sm mb-4">
    <div class = "card-body">
        <h2 class = "text-primary mb-4">Chi tiết đơn hàng: <span class = "text-dark">@Model.OrderCode</span></h2>

        <div class = "row mb-2">
            <div class = "col-md-6">
                <p><strong>👤 Người đặt:</strong> @Model.UserName</p>
                <p><strong>📅 Ngày đặt:</strong> @Model.OrderDate.ToString("dd/MM/yyyy HH:mm")</p>
            </div>
            <div class = "col-md-6">
                <p>
                    <strong>📦 Trạng thái:</strong>
                    @{
                        string status = Model.Status switch
                        {
                            1 => "Chờ xác nhận",
                            2 => "Đã xác nhận",
                            3 => "Đã giao",
                            _ => "Đã hủy"
                        };

                        string badgeClass = Model.Status switch
                        {
                            1 => "badge bg-warning text-dark",
                            2 => "badge bg-primary",
                            3 => "badge bg-success",
                            _ => "badge bg-danger"
                        };
                    }
                    <span class = "@badgeClass">@status</span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class = "card shadow-sm">
    <div class = "card-header bg-primary text-white">
        <strong>Danh sách sản phẩm</strong>
    </div>
    <div class = "card-body p-0">
        <table class = "table table-bordered table-hover mb-0">
            <thead class = "table-light text-center">
            <tr>
                <th>#</th>
                <th>Hình ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
            </tr>
            </thead>
            <tbody class = "align-middle text-center">
            @for (int i = 0; i < Model.OrderDetails.Count; i++)
            {
                var item = Model.OrderDetails[i];
                <tr>
                    <td>@(i + 1)</td>
                    <td>
                 
                        <img src = "~/img/product/@item.Product.Image" alt = "@item.Product.Name" class = "img-fluid" style = "max-width: 100px; max-height: 100px;">

                    <td class = "text-start">@item.Product?.Name</td>
                    <td>@item.Price.ToString("n0") ₫</td>
                    <td>@item.Quantity</td>
                    <td>@((item.Quantity * item.Price).ToString("n0"))₫</td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>

<div class = "mt-4">
    <a class = "btn btn-secondary" asp-action = "Index">
        <i class = "bi bi-arrow-left"></i> Quay lại danh sách
    </a>
</div>
