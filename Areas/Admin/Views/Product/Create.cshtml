@model MyWebApp.Models.Product

@{
    ViewData["Title"] = "Thêm sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<link rel = "stylesheet" href = "~/css/Admin/Ckecss.css"/>

<div class = "container mt-5">
    <div class = "card shadow-lg border-0">
        <div class = "card-header bg-primary text-white">
            <h4 class = "mb-0"><i class = "fas fa-plus-circle me-2"></i>Thêm sản phẩm mới</h4>
        </div>

        <div class = "card-body">
            <form asp-area = "Admin" asp-action = "Create" asp-controller = "Product" enctype = "multipart/form-data" method = "post">
                <div class = "row g-4">
                    <div class = "col-md-6">
                        <label asp-for = "Name" class = "form-label">Tên sản phẩm</label>
                        <input asp-for = "Name" class = "form-control" placeholder = "Nhập tên sản phẩm..."/>
                        <span asp-validation-for = "Name" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-3">
                        <label asp-for = "Price" class = "form-label">Giá</label>
                        <input asp-for = "Price" class = "form-control" placeholder = "VND"/>
                        <span asp-validation-for = "Price" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-3">
                        <label asp-for = "Quantity" class = "form-label">Số lượng</label>
                        <input asp-for = "Quantity" class = "form-control"/>
                        <span asp-validation-for = "Quantity" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-6">
                        <label asp-for = "CategoryId" class = "form-label">Danh mục</label>
                        <select asp-for = "CategoryId" asp-items = "ViewBag.Categories" class = "form-select">
                            <option disabled selected>-- Chọn danh mục --</option>
                        </select>
                        <span asp-validation-for = "CategoryId" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-6">
                        <label asp-for = "BrandId" class = "form-label">Thương hiệu</label>
                        <select asp-for = "BrandId" asp-items = "ViewBag.Brands" class = "form-select">
                            <option disabled selected>-- Chọn thương hiệu --</option>
                        </select>
                        <span asp-validation-for = "BrandId" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-12">
                        <label asp-for = "Description" class = "form-label">Mô tả sản phẩm</label>
                        <textarea asp-for = "Description" class = "form-control" rows = "6"></textarea>
                        <span asp-validation-for = "Description" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-6">
                        <label class = "form-label">Hình ảnh sản phẩm</label>
                        <input type = "file" id = "ImageFile" name = "ImageFile" class = "form-control" accept = "image/*"/>
                        <span asp-validation-for = "Image" class = "text-danger"></span>
                    </div>

                    <div class = "col-md-6 d-flex align-items-end">
                        <img id = "imgpreview" src = "https://via.placeholder.com/150" class = "img-thumbnail" alt = "Preview" style = "max-height: 150px;"/>
                    </div>
                </div>

                <div class = "mt-4 text-end">
                    <a asp-action = "Index" class = "btn btn-outline-secondary me-2">
                        <i class = "fas fa-arrow-left"></i> Quay lại
                    </a>
                    <button type = "submit" class = "btn btn-success">
                        <i class = "fas fa-save"></i> Lưu sản phẩm
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src = "https://code.jquery.com/jquery-3.6.0.min.js"></script>
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
    <script src = "https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>

    <script>
        // Preview hình ảnh
        $('#ImageFile').on('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    $('#imgpreview').attr('src', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        // CKEditor khởi tạo
        CKEDITOR.replace('Description');
    </script>
}
