@model MyWebApp.ViewModels.ProductFilterViewModel
@{
    ViewData["Title"] = "Danh sách sản phẩm";
}
<style>
    #productSlider {
        max-height: 400px;
        overflow: hidden;
    }

    #productSlider img {
        object-fit: cover;
        height: 400px;
    }
</style>
<!-- Slider -->
@if (Model.Sliders != null && Model.Sliders.Any())
{
    <div id = "homeSlider" class = "carousel slide mb-4" data-bs-ride = "carousel">
        <div class = "carousel-inner rounded shadow">
            @for (int i = 0; i < Model.Sliders.Count; i++)
            {
                var slider = Model.Sliders[i];
                <div class = "carousel-item @(i == 0 ? "active" : "")">
                    <img src = "~/img/slider/@slider.Image" class = "d-block w-100" alt = "@slider.Title" style = "height: 400px; object-fit: cover;"/>
                </div>
            }
        </div>
        <button class = "carousel-control-prev" type = "button" data-bs-target = "#homeSlider" data-bs-slide = "prev">
            <span class = "carousel-control-prev-icon" aria-hidden = "true"></span>
            <span class = "visually-hidden">Trước</span>
        </button>
        <button class = "carousel-control-next" type = "button" data-bs-target = "#homeSlider" data-bs-slide = "next">
            <span class = "carousel-control-next-icon" aria-hidden = "true"></span>
            <span class = "visually-hidden">Tiếp</span>
        </button>
    </div>
}

<!-- Hiển thị sản phẩm -->
<div class = "row">
    <div class = "col-md-12">
        <h2 class = "mb-4 text-primary fw-bold">Danh sách sản phẩm</h2>
        <div class = "row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4">
            @foreach (var item in Model.Products)
            {
                <div class = "col">
                    <div class = "card h-100 shadow-sm border-0 product-card">
                        <a asp-controller = "Product" asp-action = "Detail" asp-route-id = "@item.Id">
                            <img src = "~/img/product/@item.MainImage" class = "card-img-top img-fluid" alt = "@item.Name" style = "height: 220px; object-fit: cover;"/>
                        </a>
                        <div class = "card-body d-flex flex-column">
                            <h5 class = "card-title text-dark fw-semibold">@item.Name</h5>
                            <p class = "card-text text-secondary mb-1">
                                <i class = "fa fa-tag me-1"></i> @item.Category?.Name</p>
                            <p class = "card-text text-secondary mb-1">
                                <i class = "fa fa-copyright me-1"></i> @item.Brand?.Name</p>
                            <p class = "card-text text-muted small mb-3"><i class = "fa fa-calendar me-1"></i> Đăng
                                bán: @item.CreatedAt.ToString("dd/MM/yyyy")</p>
                            <div class = "mt-auto">
                                <p class = "fw-bold text-danger fs-5">@item.Price.ToString("N0") ₫</p>

                                <div class = "d-grid gap-2">
                                    <a
                                        asp-area = "User"
                                        asp-controller = "Product"
                                        asp-action = "Detail"
                                        asp-route-categorySlug = "@item.Category?.Slug"
                                        asp-route-brandSlug = "@item.Brand?.Slug"
                                        asp-route-productSlug = "@item.Slug" class = "btn btn-outline-primary"
                                    >
                                        <i class = "fa fa-eye me-1"></i> Xem chi tiết
                                    </a>
                                    <form asp-controller = "Cart" asp-action = "Add" asp-route-id = "@item.Id" method = "post" class = "d-grid">
                                        <button type = "submit" class = "btn btn-success mt-2">
                                            <i class = "fa fa-cart-plus me-1"></i> Thêm vào giỏ hàng
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
<!-- Bootstrap CSS -->
<link href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel = "stylesheet"/>

<!-- Bootstrap JS -->
<script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
