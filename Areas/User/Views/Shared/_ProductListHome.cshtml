@model IEnumerable<MyWebApp.Models.Product>
<link rel = "stylesheet" href = "~/css/User/HomeIndex.css"/>

<div class = "row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 g-4">

    @if (!Model.Any())
    {
        <div class = "col-12">
            <div class = "empty-state fade-in">
                <div class = "empty-state-icon">
                    <i class = "fas fa-search"></i>
                </div>
                <h3 class = "text-muted mb-3">Không có sản phẩm nào phù hợp</h3>
                <p class = "text-muted">Hãy thử điều chỉnh bộ lọc hoặc tìm kiếm với từ khóa khác</p>
            </div>
        </div>
    }
    else
    {
        @foreach (var item in Model)
        {
            <div class = "col fade-in">
                <div class = "card h-100 shadow-sm border-0 product-card">
                    <div class = "product-image-container">
                        <a
                            asp-area = "User"
                            asp-controller = "Product"
                            asp-action = "Detail"
                            asp-route-categorySlug = "@item.Category?.Slug"
                            asp-route-brandSlug = "@item.Brand?.Slug"
                            asp-route-productSlug = "@item.Slug"
                        >
                            <img
                                src = "~/img/product/@item.MainImage"
                                class = "product-image"
                                alt = "@item.Name"
                            />
                            <div class = "image-overlay"></div>
                        </a>
                    </div>

                    <div class = "card-body d-flex flex-column">
                        <h5 class = "product-title">@item.Name</h5>

                        <div class = "product-meta">
                            <i class = "fas fa-tag"></i>
                            <span>@item.Category?.Name</span>
                        </div>

                        <div class = "product-meta">
                            <i class = "fas fa-copyright"></i>
                            <span>@item.Brand?.Name</span>
                        </div>

                        <div class = "product-meta">
                            <i class = "fas fa-calendar"></i>
                            <span>Đăng bán: @item.CreatedAt.ToString("dd/MM/yyyy")</span>
                        </div>

                        <div class = "mt-auto ">

                            @if (item.DiscountPercent is > 0)
                            {
                                <p class = "text-decoration-line-through">@item.Price.ToString("N0") VND</p>
                                <p>
                                    <strong><span class = "text-danger">@item.DiscountPrice?.ToString("N0") VND</span></strong>
                                    (<span>-@item.DiscountPercent %</span>)
                                </p>
                            }
                            else
                            {
                                <p>
                                    <strong><span class = "text-danger">@item.Price.ToString("N0") VND</span></strong>
                                </p>
                            }

                            <div class = "sold-info">
                                <i class = "fas fa-fire me-1"></i>
                                Đã bán: <strong>@item.Sold</strong>
                            </div>

                            <a
                                asp-area = "User"
                                asp-controller = "Product"
                                asp-action = "Detail"
                                asp-route-categorySlug = "@item.Category?.Slug"
                                asp-route-brandSlug = "@item.Brand?.Slug"
                                asp-route-productSlug = "@item.Slug"
                                class = "btn btn-primary-modern btn-modern w-100 mt-2"
                            >
                                <i class = "fas fa-eye me-1"></i> Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
</div>


